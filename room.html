<!DOCTYPE html>  
<html lang="zh-CN"> 
<head> 
<meta charset="UTF-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<title>THE ROOM - MULTIVERSE LOFI</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

<style>
    /* =========================================
       1. å…¨å±€ä¸èƒŒæ™¯
    ========================================= */
    body {
        margin: 0; height: 100vh;
        display: flex; justify-content: center; align-items: center;
        overflow: hidden;
        font-family: 'VT323', monospace;
        background: radial-gradient(circle at center, #1a1a2e 0%, #000000 100%);
    }

    /* å™ªç‚¹è¦†ç›– */
    .noise-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        pointer-events: none; z-index: 9999; opacity: 0.12;
        background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noiseFilter"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noiseFilter)" opacity="1"/%3E%3C/svg%3E');
    }
    
    /* æš–è‰²å¤å¤æ»¤é•œ */
    body::after {
        content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: radial-gradient(circle, rgba(255, 220, 180, 0.05) 0%, rgba(80, 40, 0, 0.3) 100%);
        pointer-events: none; z-index: 9998; mix-blend-mode: overlay;
    }

    /* =========================================
       2. CRT æ˜¾ç¤ºå™¨å®¹å™¨
    ========================================= */
    .crt-monitor {
        position: relative; width: 1100px; max-width: 95vw; aspect-ratio: 209 / 128; 
        border: 12px solid #5d4037; border-radius: 8px;
        box-shadow: 0 0 20px rgba(0,0,0,0.8), inset 0 0 80px rgba(0, 0, 0, 0.7); 
        background: #1a1005; margin: auto; overflow: hidden;
    }

    /* æ‰«æçº¿æ•ˆæœ */
    .scanlines {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(255, 200, 100, 0.08) 50%, rgba(255, 200, 100, 0.08));
        background-size: 100% 4px; pointer-events: none; z-index: 999; opacity: 0.6; 
    }

    /* REC å½•åˆ¶æŒ‡ç¤ºç¯ */
    @keyframes blink-anim { 0%, 100% { opacity: 1; text-shadow: 0 0 5px #ff0000; } 50% { opacity: 0.3; text-shadow: none; } }
    .rec-indicator {
        position: absolute; top: 30px; right: 30px; color: #ff0000; z-index: 100; 
        font-family: 'VT323', monospace; font-weight: bold; font-size: 24px; letter-spacing: 2px;
        animation: blink-anim 1.5s infinite ease-in-out;
    }

    /* =========================================
       3. æˆ¿é—´ç‰©å“å¸ƒå±€
    ========================================= */
    #game-content { position: absolute; top: 0; left: 0; width: 100%; height: 100%; image-rendering: pixelated; }
    #game-content img { position: absolute; user-select: none; -webkit-user-drag: none; transition: opacity 0.3s ease, filter 0.2s, width 0.3s ease; }
    
    #sky-layer { width: 100%; height: 100%; z-index: 0; top: 0; left: 0; }
    #room-layer { width: 100%; height: 100%; z-index: 1; top: 0; left: 0; }
    
    /* ç‰©å“å®šä½ */
    #obj-tree { width: 13%; bottom: 7%; left: 5%; z-index: 20; }
    #obj-guitar { width: 6%; bottom: 12%; left: 30%; z-index: 50; }
    #obj-bass { width: 6%; bottom: 12%; left: 33%; z-index: 51; }
    #obj-keyboard { width: 14%; bottom: 86%; left: 84%; z-index: 52; }
    #obj-player { width: 8%; bottom: 5%; left: 47%; z-index: 53; }
    #obj-girl { width: 12%; bottom: 10%; left: 55%; z-index: 60; }
    #obj-computer { width: 8%; bottom: 3%; left: 2%; z-index: 55; }
    #obj-chords { width: 10%; bottom: 55%; left: 87%; z-index: 40; }
    #obj-book { width: 9%; bottom: 65%; left: 87%; z-index: 41; }
    #obj-fishtank { width: 11%; bottom: 5%; left: 78%; z-index: 13; }
    #obj-light { width: 4%; top: -1%; left: 40%; z-index: 70; }
    #obj-poster { width: 6%; bottom: 71%; left: 7%; z-index: 15; }

    /* ç¯çš„æ‹‰åŠ¨åŠ¨ç”» */
    @keyframes pull-down-spring {
        0% { transform: translateY(0); }
        40% { transform: translateY(15px); } 
        100% { transform: translateY(0); }
    }
    .pull-active {
        animation: pull-down-spring 0.4s ease-in-out forwards;
    }

    /* å®æ—¶æ—¶é’Ÿ */
    #obj-clock { position: absolute; width: 8%; bottom: 36%; left: 87%; z-index: 42; aspect-ratio: 1/1; }
    #obj-clock img { width: 100%; height: 100%; position: relative; }
    .clock-hand { position: absolute; bottom: 50%; left: 50%; transform-origin: bottom center; background: #222; pointer-events: none; border-radius: 2px; box-shadow: 1px 1px 2px rgba(0,0,0,0.3); }
    .hour-hand { width: 4px; height: 25%; margin-left: -2px; }
    .min-hand { width: 3px; height: 35%; margin-left: -1.5px; }
    .sec-hand { width: 1px; height: 40%; margin-left: -0.5px; background: #a33; }
    .clock-center { position: absolute; top: 50%; left: 50%; width: 6px; height: 6px; background: #111; border-radius: 50%; transform: translate(-50%, -50%); pointer-events: none; }

    /* =========================================
       4. æ··éŸ³å¼¹çª— (Mixer) æ ·å¼
    ========================================= */
    #mixer-overlay {
        display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.4); z-index: 2000; align-items: center; justify-content: center;
    }
    .lofi-window {
        background-color: #cfc6b8; 
        width: 460px; 
        border: 4px solid #111; 
        box-shadow: 12px 12px 0px rgba(0,0,0,0.5); 
        font-family: 'VT323', monospace; color: #111; position: relative;
    }
    .lofi-header {
        background: #111; color: #cfc6b8; 
        padding: 10px 15px; font-size: 28px; letter-spacing: 2px;
        display: flex; justify-content: space-between; align-items: center; text-transform: uppercase; 
        border-bottom: 4px solid #111;
    }
    .lofi-close { cursor: pointer; padding: 0 5px; font-weight: bold; }
    
    .lofi-content { padding: 30px; }
    .control-row { margin-bottom: 25px; display: flex; align-items: center; justify-content: space-between; }
    .label { font-size: 28px; width: 90px; text-transform: uppercase; }
    
    .pixel-slider-container { flex-grow: 1; height: 30px; display: flex; align-items: center; margin-left: 20px; cursor: pointer; position: relative; }
    .slider-track { width: 100%; height: 6px; background: #555; border: 2px solid #000; position: relative; }
    .slider-handle { 
        width: 20px; height: 34px; 
        background: #111; position: absolute; top: 50%; transform: translate(-50%, -50%); 
        border: 2px solid #cfc6b8; pointer-events: none; transition: left 0.1s; 
    }
    
    .pixel-toggle { width: 60px; height: 30px; border: 3px solid #111; position: relative; cursor: pointer; background: #cfc6b8; }
    .pixel-toggle::after { content: ''; position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: #111; transition: transform 0.1s; }
    .pixel-toggle.active { background: #111; }
    .pixel-toggle.active::after { background: #cfc6b8; transform: translateX(30px); }
    
    .status-text { font-size: 22px; text-align: right; margin-top: -15px; margin-bottom: 25px; color: #555; }

    /* äº¤äº’ç±» */
    @keyframes float-gentle { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
    .anim-hover { cursor: pointer; }
    .anim-hover:hover { filter: brightness(1.2) sepia(0.3); animation: float-gentle 1s infinite ease-in-out; }
    .draggable { cursor: grab; }
    .draggable:active { cursor: grabbing; transform: scale(0.98); animation: none; }

</style>
</head> <body>

<div class="noise-overlay"></div>

<div id="audio-engine" style="display:none;"> <audio id="audio-ambience" loop preload="auto"></audio> <audio id="stem-drums" loop preload="auto"></audio> <audio id="stem-bass" loop preload="auto"></audio> <audio id="stem-guitar" loop preload="auto"></audio> <audio id="stem-other" loop preload="auto"></audio> </div> <div class="crt-monitor" id="monitor"> <div class="scanlines"></div> <div class="rec-indicator">â— REC</div>

<div id="game-content">
    <img id="sky-layer" src="assets/rain_bk.png" alt="Sky">
    <img id="room-layer" src="assets/rain.png" alt="Room">

    <img id="obj-tree" class="draggable anim-hover" src="assets/rain_tree.png" alt="Tree">
    <img id="obj-girl" class="draggable anim-hover" src="assets/girl.png" alt="Girl">
    <img id="obj-book" class="draggable anim-hover" src="assets/book.png" alt="Diary">
    <img id="obj-computer" class="draggable anim-hover" src="assets/computer.png" alt="Computer">
    <img id="obj-fishtank" class="draggable anim-hover" src="assets/fish.png" alt="Fish Tank">
    <img id="obj-light" class="draggable anim-hover" src="assets/light.png" alt="Light">
    <img id="obj-poster" class="draggable anim-hover" src="assets/poster.jpg" alt="Poster">

    <img id="obj-guitar" class="draggable anim-hover" src="assets/guitar.png" alt="Guitar">
    <img id="obj-bass" class="draggable anim-hover" src="assets/bass.png" alt="Bass">
    <img id="obj-keyboard" class="draggable anim-hover" src="assets/keyboard.png" alt="Keyboard">
    <img id="obj-chords" class="draggable anim-hover" src="assets/chords.png" alt="Chords">
    
    <img id="obj-player" class="draggable anim-hover" src="assets/record player.png" alt="Player">

    <div id="obj-clock" class="draggable">
        <img src="assets/clock.png" alt="Clock Face"> 
        <div class="clock-hand hour-hand" id="ch-hour"></div>
        <div class="clock-hand min-hand" id="ch-min"></div>
        <div class="clock-hand sec-hand" id="ch-sec"></div>
        <div class="clock-center"></div>
    </div>

    <div id="mixer-overlay">
        <div class="lofi-window">
            <div class="lofi-header">
                <span id="win-title">GUITAR.EXE</span>
                <span class="lofi-close" onclick="closeMixer()">[X]</span>
            </div>
            <div class="lofi-content">
                <div class="control-row">
                    <span class="label">STATUS</span>
                    <div class="pixel-toggle active" id="toggle-mute" onclick="toggleSwitch(this)"></div>
                </div>
                <div class="status-text" id="status-text">CONNECTED</div>
                <div class="control-row">
                    <span class="label">VOL</span>
                    <div class="pixel-slider-container" id="slider-vol" onclick="moveSlider(event, this)">
                        <div class="slider-track"></div>
                        <div class="slider-handle" style="left: 80%;"></div>
                    </div>
                </div>
                <div class="control-row"><span class="label">REVERB</span><div class="pixel-slider-container" onclick="moveSlider(event, this)"><div class="slider-track"></div><div class="slider-handle" style="left: 40%;"></div></div></div>
                <div class="control-row"><span class="label">PAN</span><div class="pixel-slider-container" onclick="moveSlider(event, this)"><div class="slider-track"></div><div class="slider-handle" style="left: 50%;"></div></div></div>
            </div>
        </div>
    </div>

</div>
</div>

<script>
    // =======================
    // ğŸµ 1. å…¨å±€éŸ³é¢‘å¼•æ“ (æ”¯æŒæ¢æ­Œ)
    // =======================
    const stems = {
        ambience: document.getElementById('audio-ambience'),
        drums: document.getElementById('stem-drums'),
        bass:  document.getElementById('stem-bass'),
        guitar: document.getElementById('stem-guitar'),
        other: document.getElementById('stem-other')
    };

    // åˆå§‹åŒ–é»˜è®¤éŸ³é‡
    stems.ambience.volume = 0.3;
    stems.drums.volume = 0.8;
    stems.bass.volume = 0.8;
    stems.guitar.volume = 0.8;
    stems.other.volume = 0.8;

    let isPlaying = false;

    // æ’­æ”¾æ‰€æœ‰è½¨é“çš„è¾…åŠ©å‡½æ•°
    function playAll() {
        if(!isPlaying) {
            isPlaying = true;
            // å°è¯•æ’­æ”¾æ¯ä¸€ä¸ªè½¨é“
            Object.values(stems).forEach(audio => {
                audio.play().catch(e => {
                    console.log("ç­‰å¾…ç”¨æˆ·äº¤äº’åæ’­æ”¾éŸ³é¢‘...", e);
                    isPlaying = false; // å¦‚æœå¤±è´¥ï¼ˆæ¯”å¦‚æ²¡ç‚¹å‡»ï¼‰ï¼Œé‡ç½®çŠ¶æ€
                });
            });
        }
    }

    // ç”¨æˆ·ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®æ—¶ï¼Œè§£é”éŸ³é¢‘æ’­æ”¾ï¼ˆæµè§ˆå™¨é™åˆ¶ï¼‰
    document.body.addEventListener('click', () => {
        playAll();
    }, { once: true });


    // =======================
    // ğŸ›ï¸ 2. æ··éŸ³å°é€»è¾‘
    // =======================
    const mixerOverlay = document.getElementById('mixer-overlay');
    const winTitle = document.getElementById('win-title');
    let currentTargetAudio = null; 

    function openMixer(instrumentName) {
        winTitle.innerText = instrumentName + ".EXE";
        mixerOverlay.style.display = 'flex';

        // æ ¹æ®ç‚¹å‡»çš„ä¹å™¨ï¼Œç»‘å®šå¯¹åº”çš„éŸ³é¢‘è½¨é“
        if (instrumentName === 'GUITAR') currentTargetAudio = stems.guitar;
        else if (instrumentName === 'BASS') currentTargetAudio = stems.bass;
        else if (instrumentName === 'KEYBOARD' || instrumentName === 'CHORDS') currentTargetAudio = stems.other;
        else currentTargetAudio = null;

        // åŒæ­¥ UI çŠ¶æ€ï¼ˆæ»‘å—å’Œé™éŸ³æŒ‰é’®ï¼‰
        if (currentTargetAudio) {
            const muteBtn = document.getElementById('toggle-mute');
            const statusText = document.getElementById('status-text');
            
            // çŠ¶æ€æ–‡å­—
            if (currentTargetAudio.muted) {
                muteBtn.classList.remove('active');
                statusText.innerText = "MUTED";
            } else {
                muteBtn.classList.add('active');
                statusText.innerText = "CONNECTED";
            }

            // éŸ³é‡æ»‘å—ä½ç½®
            const volHandle = document.querySelector('#slider-vol .slider-handle');
            if(volHandle) {
                volHandle.style.left = (currentTargetAudio.volume * 100) + '%';
            }
        }
    }

    function closeMixer() {
        mixerOverlay.style.display = 'none';
    }

    // æ»‘å—æ‹–åŠ¨é€»è¾‘
    function moveSlider(e, container) {
        const rect = container.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        let percent = (clickX / rect.width) * 100;
        
        // é™åˆ¶åœ¨ 0-100%
        if(percent < 0) percent = 0; 
        if(percent > 100) percent = 100;
        
        // æ›´æ–° UI
        const handle = container.querySelector('.slider-handle');
        handle.style.left = percent + '%';
        
        // å¦‚æœæ˜¯éŸ³é‡æ¡ï¼Œä¸”å½“å‰æœ‰é€‰ä¸­çš„ä¹å™¨ï¼Œæ›´æ–°å®é™…éŸ³é‡
        if (container.id === 'slider-vol' && currentTargetAudio) {
            currentTargetAudio.volume = percent / 100;
        }
    }

    // å¼€å…³é€»è¾‘
    function toggleSwitch(el) {
        el.classList.toggle('active');
        const isActive = el.classList.contains('active');
        const statusText = document.getElementById('status-text');
        
        statusText.innerText = isActive ? "CONNECTED" : "MUTED";
        
        if (currentTargetAudio) {
            currentTargetAudio.muted = !isActive;
        }
    }

    // =======================
    // ğŸ–¼ï¸ 3. é¡µé¢ä¸åœºæ™¯é€»è¾‘
    // =======================
    document.addEventListener('DOMContentLoaded', () => {
        // --- å®æ—¶æ—¶é’Ÿ ---
        function updateRealTimeClock() {
            const now = new Date();
            const sec = now.getSeconds(); const min = now.getMinutes(); const hour = now.getHours();
            const secDeg = sec * 6; const minDeg = min * 6 + sec * 0.1; const hourDeg = (hour % 12) * 30 + min * 0.5;
            
            const sHand = document.getElementById('ch-sec');
            const mHand = document.getElementById('ch-min');
            const hHand = document.getElementById('ch-hour');
            
            if(sHand) sHand.style.transform = `rotate(${secDeg}deg)`;
            if(mHand) mHand.style.transform = `rotate(${minDeg}deg)`;
            if(hHand) hHand.style.transform = `rotate(${hourDeg}deg)`;
        }
        setInterval(updateRealTimeClock, 1000); updateRealTimeClock(); 

        // --- æ‹–æ‹½ç³»ç»Ÿ ---
        const draggables = document.querySelectorAll('.draggable');
        const container = document.getElementById('game-content');
        
        draggables.forEach(item => {
            let isDragging = false; 
            let startX, startLeft, hasMoved = false;

            item.addEventListener('mousedown', (e) => {
                isDragging = true; 
                hasMoved = false; 
                startX = e.clientX;
                startLeft = (item.offsetLeft / container.offsetWidth) * 100;
                item.style.cursor = 'grabbing'; 
                item.style.animation = 'none'; 
                e.preventDefault(); 
            });

            window.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                e.preventDefault();
                if (Math.abs(e.clientX - startX) > 5) {
                    hasMoved = true;
                    const deltaX = ((e.clientX - startX) / container.offsetWidth) * 100;
                    let newLeft = startLeft + deltaX;
                    // è¾¹ç•Œé™åˆ¶
                    if(newLeft < -20) newLeft = -20; 
                    if(newLeft > 95) newLeft = 95;
                    item.style.left = newLeft + '%';
                }
            });
			// --- ç§»åŠ¨ç«¯è§¦å±æ”¯æŒ ---
			item.addEventListener('touchstart', (e) => {
			    isDragging = true;
			    hasMoved = false;
			    // è·å–ç¬¬ä¸€ä¸ªè§¦æ‘¸ç‚¹çš„ä½ç½®
			    startX = e.touches[0].clientX; 
			    startLeft = (item.offsetLeft / container.offsetWidth) * 100;
			    item.style.animation = 'none';
			    e.preventDefault(); // é˜²æ­¢æ‹–æ‹½æ—¶é¡µé¢æ»šåŠ¨
			});
			
			window.addEventListener('touchmove', (e) => {
			    if (!isDragging) return;
			    const clientX = e.touches[0].clientX;
			    if (Math.abs(clientX - startX) > 5) {
			        hasMoved = true;
			        const deltaX = ((clientX - startX) / container.offsetWidth) * 100;
			        let newLeft = startLeft + deltaX;
			        // è¾¹ç•Œé™åˆ¶
			        if(newLeft < -20) newLeft = -20;
			        if(newLeft > 95) newLeft = 95;
			        item.style.left = newLeft + '%';
			    }
			}, { passive: false });
			
			window.addEventListener('touchend', () => {
			    if(isDragging) {
			        isDragging = false;
			        item.style.animation = '';
			        // å¦‚æœæ²¡æœ‰ç§»åŠ¨ï¼Œåˆ™è§†ä¸ºç‚¹å‡»
			        if (!hasMoved) handleItemClick(item.id);
			    }
			});


            window.addEventListener('mouseup', () => {
                if(isDragging) {
                    isDragging = false; 
                    item.style.cursor = 'grab'; 
                    item.style.animation = ''; 
                    if (!hasMoved) {
                        handleItemClick(item.id); // å¦‚æœæ²¡æ‹–åŠ¨ï¼Œè§†ä¸ºç‚¹å‡»
                    }
                }
            });
        });

        // --- åœºæ™¯ä¸éŸ³ä¹åˆ‡æ¢æ ¸å¿ƒ ---
        const skyLayer = document.getElementById('sky-layer');
        const roomLayer = document.getElementById('room-layer');
        const treeObj = document.getElementById('obj-tree');

        // ä¸»é¢˜é…ç½®ï¼šname å¿…é¡»å¯¹åº”éŸ³é¢‘æ–‡ä»¶çš„ filename å‰ç¼€
        const themes = [
            { name: 'rain',   size: '12%' },
            { name: 'desert', size: '11%' },
            { name: 'jungle', size: '18%' },
            { name: 'sea',    size: '17%' },
            { name: 'snow',   size: '22%' }
        ];

        let savedThemeName = localStorage.getItem('currentTheme') || 'rain';
        let currentThemeIndex = themes.findIndex(t => t.name === savedThemeName);
        if (currentThemeIndex === -1) currentThemeIndex = 0;

        // åº”ç”¨ä¸»é¢˜å‡½æ•°
        function applyTheme(index) {
            const theme = themes[index];
            const prefix = theme.name; // ä¾‹å¦‚ 'rain'

            // 1. åˆ‡æ¢å›¾ç‰‡èµ„æº
            skyLayer.src = `assets/${prefix}_bk.png`;
            roomLayer.src = `assets/${prefix}.png`;
            treeObj.src = `assets/${prefix}_tree.png`;
            treeObj.style.width = theme.size;

            // 2. åˆ‡æ¢éŸ³é¢‘èµ„æº (å®Œå…¨æ›¿æ¢æ­Œæ›²)
            // å…ˆæš‚åœå½“å‰æ’­æ”¾
            Object.values(stems).forEach(s => s.pause());

            // æ›¿æ¢æ‰€æœ‰æºæ–‡ä»¶è·¯å¾„
            // æ ¼å¼: assets/theme_instrument.mp3
            stems.ambience.src = `assets/${prefix}_ambience.mp3`;
            stems.drums.src    = `assets/${prefix}_drums.mp3`;
            stems.bass.src     = `assets/${prefix}_bass.mp3`;
            stems.guitar.src   = `assets/${prefix}_guitar.mp3`;
            stems.other.src    = `assets/${prefix}_other.mp3`;

            // é‡æ–°åŠ è½½å¹¶æ’­æ”¾
            Object.values(stems).forEach(s => {
                s.load(); 
                // å¦‚æœä¹‹å‰å°±åœ¨æ’­æ”¾çŠ¶æ€ï¼Œåˆ‡æ¢åç»§ç»­æ’­æ”¾
                if(isPlaying) {
                    s.play().catch(e => {}); 
                }
            });
        }
        
        // é¦–æ¬¡åŠ è½½
        applyTheme(currentThemeIndex);

        // ç‚¹å‡»äº‹ä»¶å¤„ç†
        function handleItemClick(id) {
            // æ‰“å¼€ä¹å™¨æ··éŸ³å°
            if (id === 'obj-guitar') return openMixer('GUITAR');
            if (id === 'obj-bass') return openMixer('BASS');
            if (id === 'obj-keyboard') return openMixer('KEYBOARD');
            if (id === 'obj-chords') return openMixer('CHORDS');

            // é“¾æ¥è·³è½¬
            if (id === 'obj-player') return window.location.href = 'player.html';
            if (id === 'obj-book') return window.location.href = 'diary.html';
            if (id === 'obj-computer') return window.location.href = 'computer.html';
            if (id === 'obj-fishtank') return window.location.href = 'fish.html'; 
            if (id === 'obj-poster') return window.location.href = 'poster.html';

            // æ‹‰ç¯åŠ¨ç”»ä¸è·³è½¬
            if (id === 'obj-light') {
                const lightObj = document.getElementById('obj-light');
                lightObj.classList.add('pull-active');
                setTimeout(() => {
                    window.location.href = 'index.html'; // åˆ·æ–°æˆ–è·³è½¬
                }, 400); 
                return; 
            }

            // åˆ‡æ¢ä¸»é¢˜
            if (id === 'obj-tree') return toggleTheme();
        }

        // åˆ‡æ¢ä¸»é¢˜é€»è¾‘
        function toggleTheme() {
            // è§†è§‰æ·¡å‡º
            skyLayer.style.opacity = 0; 
            roomLayer.style.opacity = 0; 
            treeObj.style.opacity = 0;

            setTimeout(() => {
                // è®¡ç®—ä¸‹ä¸€ä¸ªä¸»é¢˜ç´¢å¼•
                currentThemeIndex = (currentThemeIndex + 1) % themes.length;
                localStorage.setItem('currentTheme', themes[currentThemeIndex].name);
                
                // æ‰§è¡Œåˆ‡æ¢
                applyTheme(currentThemeIndex);
                
                // è§†è§‰æ·¡å…¥
                skyLayer.style.opacity = 1; 
                roomLayer.style.opacity = 1; 
                treeObj.style.opacity = 1;
            }, 300); 
        }
    });
</script>
</body>
</html>